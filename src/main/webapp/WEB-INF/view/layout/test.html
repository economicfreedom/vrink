<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

    <script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.154.0/build/three.module.js",
    "three/addons/": "https://unpkg.com/three@0.154.0/examples/jsm/",
    "@pixiv/three-vrm": "https://unpkg.com/browse/@pixiv/three-vrm@2.0.6/lib/three-vrm.module.js"
  }
}


    </script>

    <script type="module">
        import * as THREE from 'three';
        import {GLTFLoader} from 'three/addons/loaders/GLTFLoader.js';
        import {VRMLoaderPlugin} from '@pixiv/three-vrm';

        const scene = new THREE.Scene();
        const renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);  // 렌더러를 body에 추가

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;  // 카메라 위치 조정

        const loader = new GLTFLoader();
        loader.register((parser) => {
            return new VRMLoaderPlugin(parser);
        });

        loader.load(
            '/vrm/test.vrm',
            (gltf) => {
                const vrm = gltf.userData.vrm;
                scene.add(vrm.scene);
                console.log(vrm);
            },
            (progress) => console.log('Loading model...', 100.0 * (progress.loaded / progress.total), '%'),
            (error) => console.error(error),
        );

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        animate();  // 애니메이션 루프 시작
    </script>

</head>
<body>
<canvas id="canvas">

</canvas>
</body>
</html>